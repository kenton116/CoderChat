extends layout

block content
  h1 ダッシュボード
  p お帰りなさい！ #{user.username} さん
  
  div.quiz
    div.create-quiz
      h2.my-3 クイズを作る🗒
      p クイズを作ってみませんか？
      a(href="/quiz/new").btn.btn-info 新規クイズを作成

    div.join-room
      h2.my-3 ルームに参加🚪
      p オンラインで学習しませんか？
      a(href="/room/quiz").btn.btn-info クイズルームに入室
      
  div.quiz-list
    h2.my-3 クイズ一覧💬
    - var hasQuizzes = quizzes.length > 0
    if(hasQuizzes)
      p あなたが作ったクイズです！
      table.table
        tr
          th クイズ名
          th 更新日時  
          th ⭐️
          th
        each quiz in quizzes
          tr
            td
              a(href=`/quiz/${quiz.quizId}`) #{quiz.quizName}
            td #{quiz.updatedAt}
            td #{quiz.star}
            td 
              a(href=`/quiz/${quiz.quizId}/edit`) 編集

    else 
      h4 作ったクイズがありません😢
      a(href="quiz/new").btn.btn-info 早速クイズを作りましょう！

  - var isAdmin = user.id === adminGithub || user.id === adminGoogle 
    div.all-quiz-list
      h2.my-3 みんなのクイズ
      table.table
          tr
            th クイズ名
            th 作成者
            th 更新日時 
            th ⭐️
            th 
            th 
            if isAdmin
              th 報告件数 
              th
          each quiz in allQuiz
            tr 
              td 
                a(href=`/quiz/${quiz.quizId}`) #{quiz.quizName}
              td #{quiz.createUser}
              td #{quiz.updatedAt}
              td #{quiz.star}
              td 
                div#report
                  form(method="post" action="/room/quiz/report")#report-form
                    input(type="hidden" name="_csrf" value!=csrfToken)
                    input(type="hidden" name="quizId" value=`${quiz.quizId}`)#report-quiz-id
                    button(type="submit").btn.btn-danger このクイズを報告
              td
                div#star
                  form(method="post" action="/room/quiz/star")#star-form
                    input(type="hidden" name="_csrf" value!=csrfToken)
                    input(type="hidden" name="quizId" value=`${quiz.quizId}`)#star-quiz-id
                    button(type="submit").btn.btn-info ⭐️をつける

              if isAdmin
                td #{quiz.badReview}
                td 
                  a(href=`/quiz/${quiz.quizId}/edit`) 編集